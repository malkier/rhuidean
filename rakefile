#
# rhuidean: a small, lightweight IRC client library
# rakefile: ruby makefile
#
# Copyright (c) 2003-2011 Eric Will <rakaur@malkier.net>
#

# Import required Ruby modules.
require 'rdoc'
require 'rake/testtask'
require 'rubygems/package_task'


$: << Dir.getwd
$: << 'lib'

require 'lib/rhuidean'

#
# Default task - unit tests.
#
# $ rake
#
task :default => [:test]

Rake::TestTask.new do |t|
    t.test_files = %w(test/ts_rhuidean.rb)
end

#
# Package generation.
#
# $ rake package
#
PKG_FILES = FileList['README.md', 'rakefile',
                     'lib/rhuidean.rb', 'lib/rhuidean/**/*.rb',
                     'test/*.rb']

spec = Gem::Specification.new do |s|
    s.name     = 'rhuidean'
    s.version  = Rhuidean::VERSION
    s.author   = 'Eric Will'
    s.email    = 'rakaur@malkier.net'
    s.homepage = 'http://github.com/rakaur/rhuidean/'
    s.platform = Gem::Platform::RUBY
    s.files    = PKG_FILES.to_a

    s.require_paths = %w(lib)
    s.test_file     = 'test/ts_rhuidean.rb'
    s.has_rdoc      = true
    s.description   = 'a small, lightweight IRC client library'
    s.summary       = 'a small lightweight IRC client library'
end

Gem::PackageTask.new(spec) do |p|
    p.name          = 'rhuidean'
    p.version       = Rhuidean::VERSION
    p.need_tar      = false
    p.need_zip      = false
    p.package_files = PKG_FILES
end

#
# rhuidean: a small, lightweight IRC client library
# rakefile: ruby makefile
#
# Copyright (c) 2003-2010 Eric Will <rakaur@malkier.net>
#

# Import required Ruby modules.
%w(rdoctask testtask gempackagetask packagetask).each do |m|
    require 'rake/' + m
end

$: << Dir.getwd
$: << 'lib'

require 'lib/rhuidean'

#
# Default task - unit tests.
#
# $ rake
#
task :default => [:test]

Rake::TestTask.new do |t|
    t.test_files = %w(test/ts_rhuidean.rb)
end

#
# Documentation generation.
#
# $ rake rdoc
#
Rake::RDocTask.new do |r|
    r.rdoc_dir = 'doc/rdoc'
    r.options << '--line-numbers' << '--inline-source'
    r.rdoc_files.include('lib/rhuidean.rb lib/rhuidean/**/*')
end

#
# Package generation.
#
# $ rake package
#
PKG_FILES = FileList['README.markdown', 'rakefile',
                     'lib/rhuidean.rb', 'lib/rhuidean/**/*.rb',
                     'test/*.rb']

Rake::PackageTask.new('package') do |p|
    p.name          = 'rhuidean'
    p.version       = Rhuidean::VERSION
    p.need_tar      = false
    p.need_zip      = false
    p.package_files = PKG_FILES
end

spec = Gem::Specification.new do |s|
    s.name     = 'rhuidean'
    s.version  = Rhuidean::VERSION
    s.author   = 'Eric Will'
    s.email    = 'rakaur@malkier.net'
    s.homepage = 'http://github.com/rakaur/rhuidean/'
    s.platform = Gem::Platform::RUBY
    s.summary  = 'a small, lightweight IRC client library'
    s.files    = PKG_FILES.to_a

    s.require_paths = %w(lib)
    s.test_file     = 'test/ts_rhuidean.rb'
    s.has_rdoc      = true
end

Rake::GemPackageTask.new(spec) do
end

